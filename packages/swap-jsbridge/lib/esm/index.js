var n=function(n,t){return t&&(n="".concat(n).concat(n.match(/\?/)?"&":"?").concat(r(t))),n},t=function(n,t){return t&&(n="".concat(n,"?p=").concat(encodeURIComponent(JSON.stringify(t)))),n},e=function(e,r,o){var i="live",a={live:n,ws:t};if(o){var c=o.type;"custom"===c&&(a[c]=o.parseCallback),a[c]&&(i=c)}return a[i](e,r)},r=function(n){var t=[];for(var e in n)if(n.hasOwnProperty(e)){var r=void 0!==n[e]?n[e]:"";t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}return t.join("&")};function o(n,t,r){return n=e(n,t,r),setTimeout((function(){window.location.href=n}),0),n}function i(n,t,r){n=e(n,t,r);var o=document.createElement("iframe"),i=document.getElementsByTagName("body")[0];i.appendChild(o);var a={border:"none",height:0,left:0,margin:0,opacity:0,padding:0,position:"fixed",right:0,visibility:"hidden",width:0,zIndex:-1};for(var c in a)o.style[c]=a[c];return o.src=n,setTimeout((function(){try{i&&i.removeChild&&i.removeChild(o)}catch(n){}}),2e3),n}function a(n,t,e){return navigator.userAgent.match(/\bSafari\/\S+$/)&&navigator.userAgent.match(/\b(iPhone|iPad|iPod)\b/)?o(n,t,e):i(n,t,e)}var c,u=[],l=null,d=function(n,t,e){u.push({url:n,param:t}),l&&(clearInterval(l),l=null),l=setInterval((function(){var n=u.shift();if(n)return a(n.url,n.param,e);clearInterval(l),l=null}),30)},f=(c=0,function(n,t,e){return void 0===t&&(t={}),new Promise((function(r,o){var i="";t.callback?i=t.callback:(i="JSBRIDGE_CALLBACK_".concat(c++),t.callback=i),window[i]=function(n){r(n),delete window[i]},a(n,t,e)}))});export{d as call,i as callByIframe,o as callByLocation,f as callWithPromise};
