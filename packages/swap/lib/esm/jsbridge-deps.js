import{call as n,callWithPromise as t}from"rocket-swap-jsbridge";import e from"axios";const o={mode:"MOCK",isMock:!1,bypassMode:"none",mockData:{},unmatchedMock:{code:999,msg:"没有匹配到数据"},swapJestServer:{},workerOpt:null,isOnline:!1,baseURL:""},i=function(n){return n?o[n]:o},r=function(n,t){return o[n]=t,o},s=function(n){return Object.entries(n).forEach((([n,t])=>{r(n,t)})),o};function c(n,t,e,o){return new(e||(e=Promise))((function(i,r){function s(n){try{a(o.next(n))}catch(n){r(n)}}function c(n){try{a(o.throw(n))}catch(n){r(n)}}function a(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(s,c)}a((o=o.apply(n,t||[])).next())}))}const a=function(n,t){return c(this,void 0,void 0,(function*(){const[o,i]=n.split("://");return yield function(n,t,o){return c(this,void 0,void 0,(function*(){const i=e.create({baseURL:n,timeout:2e4,withCredentials:!1,headers:{"x-swap-jsbridge":"true"}});return(yield i.get(t,{params:o})).data}))}(o,`/${i}`,t)}))},u=function(n){return function(t,e,...o){return c(this,void 0,void 0,(function*(){const{isMock:r,bypassMode:s}=i();return r&&["api","none"].includes(s)?yield a(t,e).catch((()=>({}))):n.call(this,t,e,...o)}))}},d=u(n),f=u(t);export{d as a,f as b,i as g,s as p,r as s,u as w};
