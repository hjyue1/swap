import{g as r,_ as e,p as s,s as o}from"./jsbridge-deps.js";export{a as swapCall,b as swapCallWithPromise}from"./jsbridge-deps.js";import{rest as t,setupWorker as n}from"swap-sw";import{setupServer as i}from"swap-sw/node";export{waitFor}from"./waitFor.js";import"swap-jsbridge";import"axios";var c=function(r){var e=[];return Object.entries(r).forEach((function(r){var s=r[0],o=r[1],n=p(s),a=n.method,i=n.url;t[a]?"function"==typeof o?e.push(t[a](i,o)):e.push(t[a](i,(function(r,e,s){return e(s.status(200),s.json(o))}))):console.error("".concat(s,"无效字段"))})),e},p=function(r){var e=r.split(" "),s=e[0],o=e[1];return{method:s.toLowerCase(),url:o}},u=function(){n().stop()},f=function(o){if(s(e({isMock:!0},o)),r("isMock"))return function(){if("JEST"!==r("mode")){var s=c(r("mockData")),o=n.apply(void 0,s),t=r(),a=t.workerOpt,i=t.bypassMode,p=t.isOnline,u=t.baseURL;o.start(e({bypassMode:i,isOnline:p,baseURL:u},a))}}();u()},l=u,d=function(e){var t=e.isMock,n=void 0===t||t,a=e.mockData;process.env.isJest="true",s({mockData:a,isMock:n,mode:"JEST"});var p=c(r("mockData")),u=i.apply(void 0,p);return o("swapJestServer",u),u},m=function(){var e=r("swapJestServer");e.listen&&e.resetHandlers&&e.close&&(beforeAll((function(){return e.listen()})),afterEach((function(){return e.resetHandlers()})),afterAll((function(){return e.close()})))},v=function(){return r("swapJestServer")},w=function(){n().restoreHandlers()},k=function(){n().resetHandlers()};export{v as getSwapJestServer,f as swapInit,d as swapJestInit,m as swapJestListen,k as swapResetHandlers,w as swapRestoreHandlers,l as swapStop};
